<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <style>
            canvas {
            border: 1px solid black;
            width: 800px;
            height: 500px;
            }
        </style>
    </head>
    <body>
        <canvas id="myPics" width="800" height="500"></canvas>
        <input id="input--color" type="color">
        <button id="eraser">Eraser</button>
        <button id="reset">Reset</button>
        <button id="undo">Undo</button>
        <input id="size" type="range" min="3" max="30" value="3">
        <script type="text/javascript">
            let isDrawing = false;
            let x = 0;
            let y = 0;
            let color = "black";

            const myPics = document.getElementById('myPics');
            const context = myPics.getContext('2d');
            const colorpicker = document.getElementById("input--color");
            const resetbtn = document.getElementById("reset");
            const undobtn = document.getElementById("undo");
            const eraser = document.getElementById("eraser");
            const size = document.getElementById("size");
            // event.offsetX, event.offsetY gives the (x,y) offset from the edge of the canvas.

            // Add the event listeners for mousedown, mousemove, and mouseup
            myPics.addEventListener('mousedown', e => {
            x = e.offsetX;
            y = e.offsetY;
            isDrawing = true;
            });

            myPics.addEventListener('mousemove', e => {
                if (isDrawing === true) {
                    drawLine(context, x, y, e.offsetX, e.offsetY);
                    x = e.offsetX;
                    y = e.offsetY;
                }
            });

            window.addEventListener('mouseup', e => {
                if (isDrawing === true) {
                    drawLine(context, x, y, e.offsetX, e.offsetY);
                    context.save();
                    x = 0;
                    y = 0;
                    isDrawing = false;
                }
            });

            function drawLine(context, x1, y1, x2, y2) {
                context.beginPath();
                context.strokeStyle= color;
                context.lineWidth = size.value;
                context.moveTo(x1, y1);
                context.lineTo(x2, y2);
                context.stroke();
                context.closePath();
            }

            colorpicker.addEventListener('change', e=>{
                color  = colorpicker.value;
            })
            resetbtn.addEventListener('click',e=>{
                context.clearRect(0, 0, myPics.width, myPics.height);
            })
            undobtn.addEventListener('click',e=>{
                context.restore();
            })
            eraser.addEventListener('click',e=>{
                color = "white";
            })
            colorpicker.addEventListener('focus',e=>{
                color = colorpicker.value;
            })
        </script>
    </body>
</html>
